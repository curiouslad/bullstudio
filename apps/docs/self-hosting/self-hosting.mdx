---
title: "Self-Hosting"
description: "Deploy bullstudio on your own infrastructure with Docker"
---

## Architecture

<Frame caption="bullstudio self-hosted deployment">
  <img src="/images/self-hosting-architecture.png" alt="Self-hosted architecture" />
</Frame>

A self-hosted bullstudio deployment consists of:

| Service        | Image / Build           | Purpose                     |
|---------------|-------------------------|-----------------------------|
| **Web**       | `apps/web/Dockerfile`   | Next.js app (UI + tRPC API) |
| **Workers**   | `apps/workers/Dockerfile` | Background processing     |
| **Postgres**  | `postgres:16`           | Primary database            |
| **Redis**     | `redis:7`               | Queue backend & sessions    |

## Quick Start with Docker Compose

### 1. Create Environment File

Create a `.env` file in `docker/prod/`:

```bash
# Postgres
POSTGRES_USER=bullstudio
POSTGRES_PASSWORD=your-secure-password
POSTGRES_DB=bullstudio

# App
DATABASE_URL=postgresql://bullstudio:your-secure-password@postgres:5432/bullstudio
DIRECT_URL=postgresql://bullstudio:your-secure-password@postgres:5432/bullstudio
AUTH_URL=https://your-domain.com
AUTH_SECRET=your-auth-secret
ENCRYPTION_KEY=your-64-char-hex-key
RESEND_API_KEY=re_your_resend_key

# OAuth (at least one provider required)
AUTH_GITHUB_ID=your-github-oauth-id
AUTH_GITHUB_SECRET=your-github-oauth-secret

# Optional
NEXT_PUBLIC_APP_URL=https://your-domain.com
```

<Info>
  Generate secrets with:
  ```bash
  # AUTH_SECRET
  openssl rand -base64 32
  # ENCRYPTION_KEY
  openssl rand -hex 32
  ```
</Info>

### 2. Deploy

```bash
docker compose -f docker/prod/compose.yml up -d --build
```

The app will be available on port `3000`. Database migrations run automatically on startup via the entrypoint script.

### 3. Verify

```bash
# Check all services are running
docker compose -f docker/prod/compose.yml ps

# View logs
docker compose -f docker/prod/compose.yml logs -f bullstudio
```

## Building Individual Images

### Web App

```bash
docker build -t bullstudio-web \
  --build-arg NEXT_PUBLIC_APP_URL=https://your-domain.com \
  --build-arg DATABASE_URL=postgresql://... \
  --build-arg DIRECT_URL=postgresql://... \
  -f apps/web/Dockerfile .
```

### Workers

```bash
docker build -t bullstudio-workers -f apps/workers/Dockerfile .
```

## Database Migrations

Migrations run automatically when the web container starts. To run them manually:

```bash
docker exec bullstudio_web pnpx prisma migrate deploy \
  --schema=./packages/prisma/schema.prisma
```

## Required External Services

### Resend (Email)

bullstudio requires a [Resend](https://resend.com) account for transactional emails.

1. Sign up at [resend.com](https://resend.com)
2. Verify your sending domain
3. Create an API key and set `RESEND_API_KEY`

<Warning>
  Email functionality (invitations, alert notifications) will not work without a valid Resend API key.
</Warning>

### OAuth Provider

At least one OAuth provider (GitHub or Google) must be configured for authentication.

## Environment Variables Reference

| Variable | Required | Description |
|----------|----------|-------------|
| `POSTGRES_USER` | Yes | Postgres username |
| `POSTGRES_PASSWORD` | Yes | Postgres password |
| `POSTGRES_DB` | Yes | Postgres database name |
| `DATABASE_URL` | Yes | Full Postgres connection string |
| `DIRECT_URL` | Yes | Direct Postgres connection string |
| `AUTH_URL` | Yes | Public URL of your deployment |
| `AUTH_SECRET` | Yes | NextAuth secret (`openssl rand -base64 32`) |
| `ENCRYPTION_KEY` | Yes | 32-byte hex key (`openssl rand -hex 32`) |
| `RESEND_API_KEY` | Yes | Resend API key |
| `AUTH_GITHUB_ID` | * | GitHub OAuth app client ID |
| `AUTH_GITHUB_SECRET` | * | GitHub OAuth app client secret |
| `AUTH_GOOGLE_ID` | * | Google OAuth client ID |
| `AUTH_GOOGLE_SECRET` | * | Google OAuth client secret |

<sub>* At least one OAuth provider is required.</sub>

## Reverse Proxy

For production, place a reverse proxy (nginx, Caddy, Traefik) in front of the app:

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

<Tip>
  [Caddy](https://caddyserver.com) handles TLS automatically and requires minimal configuration.
</Tip>
